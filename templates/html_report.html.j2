<!DOCTYPE html>
<html>
<head>
    <title>{{ title }}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        h1 { color: #333; }
        .metadata { background-color: #f5f5f5; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .section { margin: 20px 0; }
        .source { margin: 10px 0; padding: 10px; border-left: 3px solid #ccc; }
    </style>
</head>
<body>
    <h1>{{ title }}</h1>
    
    <div class="metadata">
        <p><strong>Research Query:</strong> {{ query }}</p>
        <p><strong>Generated on:</strong> {{ timestamp }}</p>
        <p><strong>Confidence Level:</strong> {{ confidence_level }}</p>
    </div>
    
    <div class="section">
        <h2>Summary</h2>
        <p>{{ summary }}</p>
    </div>
    
    <div class="section">
        <h2>Key Findings</h2>
        <ul>
        {% for finding in key_findings %}
            <li>{{ finding }}</li>
        {% endfor %}
        </ul>
    </div>
    
    <div class="section">
        <h2>Analysis</h2>
        <p>{{ analysis }}</p>
    </div>
    
    {% if sources and include_sources %}
    <div class="section">
        <h2>Sources</h2>
        {% for source in sources %}
        <div class="source">
            <h3><a href="{{ source.url }}" target="_blank">{{ source.title }}</a></h3>
            <p>{{ source.summary[:200] }}...</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if contradictions %}
    <div class="section">
        <h2>Contradictions Identified</h2>
        <ul>
        {% for contradiction in contradictions %}
            <li>{{ contradiction }}</li>
        {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    {% if gaps %}
    <div class="section">
        <h2>Information Gaps</h2>
        <ul>
        {% for gap in gaps %}
            <li>{{ gap }}</li>
        {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    <hr>
    <p><em>Generated by Deep Research Report Generation Agent System</em></p>
</body>
</html>
